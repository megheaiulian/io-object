<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../io-value/io-value.html">
<link rel="import" href="../io-input/io-input.html">

<!--
`<io-object-item>` is used by `<io-object>` element to display element key-value pairs.

TODO: WORK IN PROGRESS

@demo demo/index.html Basic Demo
-->

<dom-module id="io-object-item">
  <style>
    :host {
      display: block;
      white-space: nowrap;
    }
    #key, #value {
      display: inline-block;
      vertical-align: top;
    }
    #key {
      color: rgb(140, 13, 150);
    }
    #key::shadow > * {
      display: inline-block;
    }
    #key:after {
      vertical-align: top;
      content: ':';
    }
    #value::shadow > io-input[type=string] {
      color: rgb(198, 22, 5);
    }
    #value::shadow > io-input[type=float],
    #value::shadow > io-input[type=integer] {
      color: rgb(25, 0, 211);
    }
    #value::shadow > io-boolean {
      color: rgb(25, 0, 211);
    }
  </style>
  <template>
    <io-value id="key"
        type="string"
        value="{{key}}"
        aria-label="key"
        placeholder="key"
        disabled="{{disabled}}"></io-value>
    <io-value id="value"
        value="{{value}}"
        disabled="{{disabled}}"
        on-keyup="_onValueKeyUp"></io-value>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'io-object-item',
    properties: {
      value: {
        notify: true
      },
      key: {
        notify: true,
        reflectToAttribute: true
      },
      disabled: {
        type: Boolean,
      }
    },
    hostAttributes: {
      role: 'treeitem'
    },
    _onValueKeyUp: function (event) {
      if (event.which == 13) {
        this.fire('add-item-after', {key: this.key});
      }
    }
  });
</script>
